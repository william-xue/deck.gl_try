# ä»é›¶åˆ° WebGL å®æˆ˜ - 3~6ä¸ªæœˆç¡¬æ ¸è·¯çº¿

> ç›®æ ‡ï¼šä»"ä¼šç”¨æ¡†æ¶"è·¨è¶Šåˆ°"æ‡‚åº•å±‚æ¸²æŸ“"ï¼ŒæŒæ¡é«˜æ€§èƒ½å›¾å½¢ç¼–ç¨‹èƒ½åŠ›

## è·¯çº¿æ€»è§ˆ

```
é˜¶æ®µ1: æµè§ˆå™¨æ¸²æŸ“åŸç† (2-3å‘¨)
  â†“
é˜¶æ®µ2: Canvas 2D é«˜æ€§èƒ½å®æˆ˜ (3-4å‘¨)
  â†“
é˜¶æ®µ3: WebGL åŸºç¡€ (6-8å‘¨)
  â†“
é˜¶æ®µ4: WebGL è¿›é˜¶ä¸å®æˆ˜é¡¹ç›® (4-6å‘¨)
  â†“
é˜¶æ®µ5: ä¸“é¡¹æ·±å…¥ (æŒç»­)
```

---

## é˜¶æ®µ 1ï¼šæµè§ˆå™¨æ¸²æŸ“åŸç†ï¼ˆ2-3å‘¨ï¼‰

### ç›®æ ‡
ç†è§£æµè§ˆå™¨"æ€ä¹ˆæŠŠä»£ç å˜æˆå±å¹•ä¸Šçš„åƒç´ "ï¼Œèƒ½ç”¨ DevTools åˆ†ææ€§èƒ½ç“¶é¢ˆã€‚

### æ ¸å¿ƒæ¦‚å¿µ
- æ¸²æŸ“ç®¡çº¿ï¼šDOM â†’ Style â†’ Layout â†’ Paint â†’ Raster â†’ Composite
- é‡æ’ï¼ˆReflowï¼‰vs é‡ç»˜ï¼ˆRepaintï¼‰vs åˆæˆï¼ˆCompositeï¼‰
- åˆæˆå±‚ï¼ˆCompositing Layerï¼‰è§¦å‘æ¡ä»¶ä¸ä»£ä»·
- æ …æ ¼åŒ–ï¼ˆRasterizationï¼‰ã€GPU åŠ é€Ÿ
- äº‹ä»¶å¾ªç¯ã€requestAnimationFrameã€Long Task

### å®æˆ˜é¡¹ç›® 1.1ï¼šæ€§èƒ½åˆ†æå°å·¥å…·
**ä»»åŠ¡**ï¼šåšä¸€ä¸ªæ»šåŠ¨/åŠ¨ç”»æ€§èƒ½å¯¹æ¯”é¡µé¢
- å®ç° 3 ç§æ–¹æ¡ˆï¼š
  1. ç”¨ `left/top` åšåŠ¨ç”»ï¼ˆè§¦å‘é‡æ’ï¼‰
  2. ç”¨ `transform` åšåŠ¨ç”»ï¼ˆåªåˆæˆï¼‰
  3. ç”¨ `will-change` æå‰æå±‚
- ç”¨ Chrome DevTools å½•åˆ¶ Performanceï¼Œå¯¹æ¯”ä¸‰è€…çš„ Timeline
- èƒ½æŒ‡å‡ºå“ªé‡Œå‘ç”Ÿäº† Layout/Paint/Raster/Composite

**éªŒæ”¶æ ‡å‡†**
- [ ] èƒ½ç”¨ Performance é¢æ¿å‡†ç¡®è¯†åˆ«é‡æ’/é‡ç»˜/åˆæˆ
- [ ] èƒ½è§£é‡Šä¸ºä»€ä¹ˆ `transform` æ¯” `left` æµç•…
- [ ] èƒ½çœ‹æ‡‚ Layers é¢æ¿çš„åˆæˆæ ‘ç»“æ„

### å®æˆ˜é¡¹ç›® 1.2ï¼šFPS ç›‘æ§å™¨
**ä»»åŠ¡**ï¼šç”¨ `requestAnimationFrame` å®ç°ä¸€ä¸ª FPS è®¡æ•°å™¨
```js
let lastTime = performance.now();
let frames = 0;
function tick(now) {
  frames++;
  if (now - lastTime >= 1000) {
    console.log(`FPS: ${frames}`);
    frames = 0;
    lastTime = now;
  }
  requestAnimationFrame(tick);
}
requestAnimationFrame(tick);
```
- åœ¨é¡µé¢ä¸Šå®æ—¶æ˜¾ç¤º FPS
- æ·»åŠ "å‹åŠ›æµ‹è¯•"æŒ‰é’®ï¼Œåˆ›å»ºå¤§é‡ DOM çœ‹ FPS ä¸‹é™
- ç”¨ Performance é¢æ¿æ‰¾åˆ°æ‰å¸§çš„åŸå› 

**éªŒæ”¶æ ‡å‡†**
- [ ] FPS ç›‘æ§å‡†ç¡®ï¼ˆÂ±2fps è¯¯å·®å†…ï¼‰
- [ ] èƒ½å¤ç°å¹¶è§£é‡Šæ‰å¸§åŸå› ï¼ˆLong Task/é¢‘ç¹é‡æ’/GCï¼‰
- [ ] ç†è§£ rAF çš„è°ƒåº¦æ—¶æœºä¸å¸§é¢„ç®—ï¼ˆ16.7msï¼‰

### å­¦ä¹ èµ„æº
- [æµè§ˆå™¨å·¥ä½œåŸç†](https://web.dev/howbrowserswork/)
- [æ¸²æŸ“æ€§èƒ½](https://web.dev/rendering-performance/)
- [Chrome DevTools æ€§èƒ½åˆ†æ](https://developer.chrome.com/docs/devtools/performance/)
- è§†é¢‘ï¼š[Jake Archibald: æµè§ˆå™¨æ¸²æŸ“åŸç†](https://www.youtube.com/watch?v=cCOL7MC4Pl0)

---

## é˜¶æ®µ 2ï¼šCanvas 2D é«˜æ€§èƒ½å®æˆ˜ï¼ˆ3-4å‘¨ï¼‰

### ç›®æ ‡
æŒæ¡ Canvas 2D çš„å¢é‡ç»˜åˆ¶ã€åˆ†å±‚ç¼“å­˜ã€æ€§èƒ½ä¼˜åŒ–ï¼Œèƒ½åšå‡º 60fps çš„å®æ—¶å›¾è¡¨ã€‚

### æ ¸å¿ƒæ¦‚å¿µ
- Canvas åæ ‡ç³»ã€å˜æ¢çŸ©é˜µï¼ˆtranslate/rotate/scale/transformï¼‰
- è·¯å¾„ï¼ˆPathï¼‰ã€å¡«å……ã€æè¾¹ã€è£å‰ªï¼ˆclipï¼‰
- ç¦»å±ç¼“å†²ï¼ˆOffscreenCanvas/ç¬¬äºŒä¸ª canvasï¼‰
- åˆ†å±‚ç»˜åˆ¶ï¼šé™æ€å±‚ + åŠ¨æ€å±‚
- å¢é‡æ¸²æŸ“ï¼šè„çŸ©å½¢ã€åªç”»å˜åŒ–åŒºåŸŸ
- é«˜ DPR é€‚é…ï¼ˆRetina å±ï¼‰
- requestAnimationFrame åˆå¸§å¤„ç†

### å®æˆ˜é¡¹ç›® 2.1ï¼šç²’å­ç³»ç»Ÿ
**ä»»åŠ¡**ï¼šå®ç° 5000+ ç²’å­çš„å¹³æ»‘è¿åŠ¨
- æ¯ä¸ªç²’å­æœ‰ä½ç½®ã€é€Ÿåº¦ã€é¢œè‰²ã€å¤§å°
- æ¯å¸§æ›´æ–°ä½ç½®ã€è¾¹ç•Œåå¼¹
- ç”¨ rAF é©±åŠ¨ï¼Œä¿æŒ 60fps
- ä¼˜åŒ–ç‚¹ï¼š
  - TypedArray å­˜å‚¨ç²’å­æ•°æ®ï¼ˆFloat32Arrayï¼‰
  - æ‰¹é‡ç»˜åˆ¶ï¼ˆä¸€æ¬¡ beginPath ç”»æ‰€æœ‰ç²’å­ï¼‰
  - è„çŸ©å½¢ä¼˜åŒ–ï¼ˆåªæ¸…ç†/é‡ç»˜å˜åŒ–åŒºåŸŸï¼‰

**éªŒæ”¶æ ‡å‡†**
- [ ] 5000 ç²’å­ç¨³å®š 60fps
- [ ] ç”¨ Performance éªŒè¯æ¯å¸§ < 16ms
- [ ] ä»£ç ä¸­ä½¿ç”¨ TypedArray å’Œæ‰¹é‡ç»˜åˆ¶

### å®æˆ˜é¡¹ç›® 2.2ï¼šé«˜æ€§èƒ½ K çº¿å›¾ï¼ˆæ ¸å¿ƒï¼‰
**ä»»åŠ¡**ï¼šå®ç°ä¸€ä¸ªå®æ—¶æ›´æ–°çš„ K çº¿å›¾è¡¨
- åŠŸèƒ½è¦æ±‚ï¼š
  - æ˜¾ç¤º 500 æ ¹å†å² K çº¿
  - WebSocket æ¨¡æ‹Ÿæ•°æ®æ¨é€ï¼ˆæ¯ 100ms ä¸€æ¬¡ï¼‰
  - é¼ æ ‡æ‚¬åœæ˜¾ç¤ºåå­—çº¿å’Œæ•°å€¼
  - æ”¯æŒæ»šè½®ç¼©æ”¾ã€æ‹–åŠ¨å¹³ç§»
- æ€§èƒ½è¦æ±‚ï¼š
  - åˆ† 3 å±‚ Canvasï¼š
    1. èƒŒæ™¯å±‚ï¼ˆç½‘æ ¼ã€åæ ‡è½´ï¼‰- é™æ€ç¼“å­˜
    2. K çº¿å±‚ï¼ˆå†å²æ•°æ®ï¼‰- å˜åŒ–æ—¶é‡ç»˜
    3. äº¤äº’å±‚ï¼ˆåå­—çº¿ã€å½“å‰å€¼ï¼‰- æ¯å¸§é‡ç»˜
  - ç”¨ rAF åˆå¸§ï¼šé«˜é¢‘æ•°æ®æŒ‰å¸§åˆå¹¶å¤„ç†
  - å¢é‡æ›´æ–°ï¼šåªæ›´æ–°"å½“å‰é‚£æ ¹ K"

**ä»£ç éª¨æ¶**
```js
// æ•°æ®é˜Ÿåˆ—
const tickQueue = [];
socket.onmessage = e => tickQueue.push(JSON.parse(e.data));

// åˆ†å±‚ Canvas
const bgCanvas = document.getElementById('bg');
const chartCanvas = document.getElementById('chart');
const interactCanvas = document.getElementById('interact');

// rAF åˆå¸§æ¸²æŸ“
function frame() {
  if (tickQueue.length) {
    const batch = tickQueue.splice(0); // åˆå¹¶è¿™ä¸€å¸§çš„æ‰€æœ‰ tick
    updateCurrentCandle(batch);        // åªæ›´æ–°å½“å‰Kçº¿
    redrawChartLayer();                // åªé‡ç»˜Kçº¿å±‚
  }
  redrawInteractLayer(); // åå­—çº¿æ¯å¸§éƒ½ç”»
  requestAnimationFrame(frame);
}
requestAnimationFrame(frame);
```

**éªŒæ”¶æ ‡å‡†**
- [ ] æ¯ç§’ 10 æ¬¡æ•°æ®æ¨é€ï¼Œç¨³å®š 60fps
- [ ] åˆ†å±‚å®ç°æ­£ç¡®ï¼ˆèƒŒæ™¯ä¸é—ªçƒã€åå­—çº¿æµç•…ï¼‰
- [ ] Performance é¢æ¿ï¼šæ¯å¸§ < 16msï¼Œæ—  Long Task
- [ ] é¼ æ ‡äº¤äº’ä¸å¡é¡¿

### å®æˆ˜é¡¹ç›® 2.3ï¼šå›¾ç‰‡ç¼–è¾‘å™¨
**ä»»åŠ¡**ï¼šå®ç°åŸºç¡€å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½
- åŠ è½½å›¾ç‰‡åˆ° Canvas
- å®ç°æ»¤é•œï¼šç°åº¦ã€åè‰²ã€äº®åº¦è°ƒæ•´
- ä½¿ç”¨ ImageData ç›´æ¥æ“ä½œåƒç´ 
- æ·»åŠ æ–‡å­—ã€è´´çº¸ï¼ˆç¦»å±ç¼“å†²åˆæˆï¼‰
- å¯¼å‡ºä¸ºå›¾ç‰‡ï¼ˆtoDataURL/toBlobï¼‰

**éªŒæ”¶æ ‡å‡†**
- [ ] æ»¤é•œå¤„ç†æµç•…ï¼ˆ< 100ms for 1080pï¼‰
- [ ] ç†è§£ ImageData çš„åƒç´ æ•°ç»„ç»“æ„
- [ ] ä½¿ç”¨ç¦»å± canvas åšå›¾å±‚åˆæˆ

### å­¦ä¹ èµ„æº
- [MDN Canvas Tutorial](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial)
- [HTML5 Canvas Deep Dive](https://joshondesign.com/p/books/canvasdeepdive/toc.html)
- [High Performance Canvas](https://www.html5rocks.com/en/tutorials/canvas/performance/)

---

## é˜¶æ®µ 3ï¼šWebGL åŸºç¡€ï¼ˆ6-8å‘¨ï¼‰

### ç›®æ ‡
ç†è§£ GPU æ¸²æŸ“ç®¡çº¿ã€ä¼šå†™ Shaderã€èƒ½åšåŸºç¡€çš„ 3D å›¾å½¢å’Œæ‰¹é‡ç»˜åˆ¶ã€‚

### æ ¸å¿ƒæ¦‚å¿µ
- GPU æ¸²æŸ“ç®¡çº¿ï¼šVertex Shader â†’ Rasterization â†’ Fragment Shader
- é¡¶ç‚¹ç¼“å†²åŒºï¼ˆVBOï¼‰ã€ç´¢å¼•ç¼“å†²åŒºï¼ˆEBOï¼‰ã€é¡¶ç‚¹æ•°ç»„å¯¹è±¡ï¼ˆVAOï¼‰
- ç€è‰²å™¨è¯­è¨€ï¼ˆGLSLï¼‰ï¼švec/mat æ•°æ®ç±»å‹ã€å†…å»ºå‡½æ•°
- åæ ‡å˜æ¢ï¼šæ¨¡å‹çŸ©é˜µã€è§†å›¾çŸ©é˜µã€æŠ•å½±çŸ©é˜µï¼ˆMVPï¼‰
- çº¹ç†ï¼ˆTextureï¼‰ã€å¸§ç¼“å†²åŒºï¼ˆFramebufferï¼‰
- æ·±åº¦æµ‹è¯•ã€æ··åˆï¼ˆBlendingï¼‰ã€å‰”é™¤ï¼ˆCullingï¼‰

### å®æˆ˜é¡¹ç›® 3.1ï¼šå½©è‰²ä¸‰è§’å½¢
**ä»»åŠ¡**ï¼šWebGL çš„ "Hello World"
- åˆ›å»º WebGL ä¸Šä¸‹æ–‡
- ç¼–å†™ Vertex Shader å’Œ Fragment Shader
- åˆ›å»º VBOï¼Œä¼ é€’é¡¶ç‚¹ä½ç½®å’Œé¢œè‰²
- ç»˜åˆ¶ä¸€ä¸ªæ¸å˜è‰²ä¸‰è§’å½¢

**Vertex Shader ç¤ºä¾‹**
```glsl
attribute vec2 a_position;
attribute vec3 a_color;
varying vec3 v_color;

void main() {
  gl_Position = vec4(a_position, 0.0, 1.0);
  v_color = a_color;
}
```

**Fragment Shader ç¤ºä¾‹**
```glsl
precision mediump float;
varying vec3 v_color;

void main() {
  gl_FragColor = vec4(v_color, 1.0);
}
```

**éªŒæ”¶æ ‡å‡†**
- [ ] èƒ½ç‹¬ç«‹ç¼–å†™å¹¶ç¼–è¯‘ Shader
- [ ] ç†è§£ attributeã€varyingã€uniform çš„åŒºåˆ«
- [ ] èƒ½è§£é‡Šä¸ºä»€ä¹ˆé¢œè‰²ä¼šè‡ªåŠ¨æ’å€¼ï¼ˆå…‰æ …åŒ–ï¼‰

### å®æˆ˜é¡¹ç›® 3.2ï¼šçº¹ç†è´´å›¾
**ä»»åŠ¡**ï¼šåœ¨çŸ©å½¢ä¸Šè´´ä¸€å¼ å›¾ç‰‡
- åŠ è½½å›¾ç‰‡å¹¶åˆ›å»ºçº¹ç†
- ä¼ é€’çº¹ç†åæ ‡ï¼ˆUVï¼‰
- åœ¨ Fragment Shader ä¸­é‡‡æ ·çº¹ç†ï¼ˆtexture2Dï¼‰
- å®ç°çº¹ç†çš„å¹³é“ºã€æ‹‰ä¼¸ã€è¿‡æ»¤ï¼ˆLINEAR/NEARESTï¼‰

**éªŒæ”¶æ ‡å‡†**
- [ ] èƒ½æ­£ç¡®åŠ è½½å¹¶æ˜¾ç¤ºçº¹ç†
- [ ] ç†è§£ UV åæ ‡ç³»ï¼ˆ0-1ï¼‰
- [ ] èƒ½è°ƒæ•´çº¹ç†è¿‡æ»¤å’Œç¯ç»•æ¨¡å¼

### å®æˆ˜é¡¹ç›® 3.3ï¼š3D æ—‹è½¬ç«‹æ–¹ä½“
**ä»»åŠ¡**ï¼šå®ç°ç»å…¸çš„æ—‹è½¬ç«‹æ–¹ä½“
- å®šä¹‰ç«‹æ–¹ä½“çš„ 8 ä¸ªé¡¶ç‚¹å’Œ 6 ä¸ªé¢ï¼ˆç´¢å¼•ç¼“å†²ï¼‰
- å®ç° MVP å˜æ¢çŸ©é˜µ
  - Modelï¼šç«‹æ–¹ä½“è‡ªè½¬
  - Viewï¼šæ‘„åƒæœºä½ç½®
  - Projectionï¼šé€è§†æŠ•å½±
- å¯ç”¨æ·±åº¦æµ‹è¯•ï¼ˆDEPTH_TESTï¼‰
- æ¯å¸§æ›´æ–°æ—‹è½¬è§’åº¦

**å…³é”®ä»£ç **
```js
// é¡¶ç‚¹ç€è‰²å™¨ä¸­
uniform mat4 u_mvp;
attribute vec3 a_position;

void main() {
  gl_Position = u_mvp * vec4(a_position, 1.0);
}

// JS ä¸­è®¡ç®— MVP
const mvp = mat4.create();
mat4.multiply(mvp, projection, view);
mat4.multiply(mvp, mvp, model);
gl.uniformMatrix4fv(u_mvpLoc, false, mvp);
```

**éªŒæ”¶æ ‡å‡†**
- [ ] ç«‹æ–¹ä½“èƒ½æ­£ç¡®æ—‹è½¬ï¼Œæ— é¢ç‰‡é”™ä½
- [ ] ç†è§£æ·±åº¦æµ‹è¯•çš„ä½œç”¨
- [ ] èƒ½æ‰‹åŠ¨è®¡ç®— MVP çŸ©é˜µï¼ˆæˆ–ç”¨ gl-matrixï¼‰

### å®æˆ˜é¡¹ç›® 3.4ï¼šç²’å­ç³»ç»Ÿï¼ˆGPU ç‰ˆæœ¬ï¼‰
**ä»»åŠ¡**ï¼šç”¨ WebGL å®ä¾‹åŒ–ç»˜åˆ¶ 10 ä¸‡ä¸ªç²’å­
- ä½¿ç”¨ `ANGLE_instanced_arrays` æ‰©å±•ï¼ˆæˆ– WebGL2 çš„ `drawArraysInstanced`ï¼‰
- æ¯ä¸ªç²’å­çš„ä½ç½®/é¢œè‰²å­˜åœ¨å•ç‹¬çš„ VBO
- Vertex Shader ä¸­ç”¨ `gl_InstanceID` åŒºåˆ†æ¯ä¸ªç²’å­
- CPU åªæ›´æ–°ä½ç½®æ•°æ®ï¼ŒGPU æ‰¹é‡ç»˜åˆ¶

**éªŒæ”¶æ ‡å‡†**
- [ ] 10 ä¸‡ç²’å­ç¨³å®š 60fps
- [ ] ç†è§£å®ä¾‹åŒ–ç»˜åˆ¶çš„åŸç†
- [ ] ç”¨ `bufferSubData` åšå¢é‡æ›´æ–°

### å­¦ä¹ èµ„æº
- **å¿…è¯»**ï¼š[WebGL Fundamentals](https://webglfundamentals.org/) - æœ€å¥½çš„ WebGL æ•™ç¨‹
- [The Book of Shaders](https://thebookofshaders.com/) - å­¦ GLSL å¿…çœ‹
- [WebGL2 Fundamentals](https://webgl2fundamentals.org/)
- åº“ï¼š[gl-matrix](https://glmatrix.net/) - çŸ©é˜µè¿ç®—åº“

---

## é˜¶æ®µ 4ï¼šWebGL è¿›é˜¶ä¸å®æˆ˜é¡¹ç›®ï¼ˆ4-6å‘¨ï¼‰

### ç›®æ ‡
æŒæ¡å¤æ‚åœºæ™¯ä¼˜åŒ–ã€åå¤„ç†ã€å¤§è§„æ¨¡æ•°æ®å¯è§†åŒ–ã€‚

### æ ¸å¿ƒæŠ€æœ¯
- å¸§ç¼“å†²åŒºï¼ˆFBOï¼‰ä¸ç¦»å±æ¸²æŸ“
- å¤šç›®æ ‡æ¸²æŸ“ï¼ˆMRTï¼‰
- åå¤„ç†æ•ˆæœï¼ˆBloom/DOF/Motion Blurï¼‰
- å¤§æ•°æ®ä¼˜åŒ–ï¼šLODã€è§†é”¥å‰”é™¤ã€ç©ºé—´ç´¢å¼•
- Compute-like æŠ€å·§ï¼ˆç”¨ Texture åš GPGPUï¼‰

### å®æˆ˜é¡¹ç›® 4.1ï¼šåå¤„ç†ç®¡çº¿
**ä»»åŠ¡**ï¼šå®ç° Bloomï¼ˆæ³›å…‰ï¼‰æ•ˆæœ
- æ¸²æŸ“åœºæ™¯åˆ°çº¹ç†ï¼ˆFBOï¼‰
- æå–é«˜äº®éƒ¨åˆ†ï¼ˆthreshold passï¼‰
- é«˜æ–¯æ¨¡ç³Šï¼ˆä¸¤éåˆ†ç¦»å¼æ¨¡ç³Šï¼‰
- å åŠ åˆ°åŸå›¾ï¼ˆadditive blendingï¼‰

**éªŒæ”¶æ ‡å‡†**
- [ ] Bloom æ•ˆæœæ­£ç¡®ä¸”å¯è°ƒèŠ‚å¼ºåº¦
- [ ] ç†è§£å¤š Pass æ¸²æŸ“æµç¨‹
- [ ] FBO åˆ‡æ¢æ— é”™è¯¯

### å®æˆ˜é¡¹ç›® 4.2ï¼šå¤§è§„æ¨¡æ•£ç‚¹å›¾
**ä»»åŠ¡**ï¼šæ¸²æŸ“ 100 ä¸‡ä¸ªç‚¹çš„å®æ—¶æ•£ç‚¹å›¾
- æ•°æ®å­˜å‚¨ï¼šç”¨çº¹ç†å­˜åæ ‡/é¢œè‰²ï¼ˆ1024x1024 çº¹ç† = 100ä¸‡åƒç´ ï¼‰
- Vertex Shader ä»çº¹ç†è¯»å–æ•°æ®
- æ”¯æŒç¼©æ”¾/å¹³ç§»ï¼ˆMVP å˜æ¢ï¼‰
- ä¼˜åŒ–ï¼šè§†é”¥å‰”é™¤ï¼ˆåªç”»å¯è§ç‚¹ï¼‰ã€LODï¼ˆè¿œå¤„ç‚¹æ›´å°ï¼‰

**éªŒæ”¶æ ‡å‡†**
- [ ] 100 ä¸‡ç‚¹ç¨³å®š 60fps
- [ ] ç¼©æ”¾/å¹³ç§»æµç•…
- [ ] ç†è§£ç”¨çº¹ç†åšæ•°æ®å­˜å‚¨çš„æŠ€å·§

### å®æˆ˜é¡¹ç›® 4.3ï¼šå®æ—¶ K çº¿å›¾ï¼ˆWebGL ç‰ˆæœ¬ï¼‰
**ä»»åŠ¡**ï¼šæŠŠé˜¶æ®µ 2 çš„ K çº¿å›¾ç”¨ WebGL é‡å†™
- æ¯æ ¹ K çº¿ç”¨å®ä¾‹åŒ–ç»˜åˆ¶ï¼ˆ2 ä¸ªä¸‰è§’å½¢ = 1 ä¸ªçŸ©å½¢ï¼‰
- Vertex Shader ä¸­æ ¹æ® OHLC æ•°æ®ç”Ÿæˆé¡¶ç‚¹
- æ”¯æŒ 10 ä¸‡æ ¹ K çº¿çš„æµç•…æ¸²æŸ“
- å¢é‡æ›´æ–°ï¼šåªç”¨ `bufferSubData` æ›´æ–°"å½“å‰K"çš„æ•°æ®

**æ•°æ®ç»“æ„**
```js
// æ¯æ ¹Kçº¿ï¼š[æ—¶é—´, å¼€, é«˜, ä½, æ”¶, æˆäº¤é‡]
const candleData = new Float32Array(100000 * 6);

// åªæ›´æ–°æœ€åä¸€æ ¹
gl.bufferSubData(gl.ARRAY_BUFFER, 
  (currentIndex * 6) * 4, // offset
  new Float32Array([ts, o, h, l, c, v])
);
```

**éªŒæ”¶æ ‡å‡†**
- [ ] 10 ä¸‡æ ¹ K çº¿ç¨³å®š 60fps
- [ ] å®æ—¶æ¨é€æ•°æ®ä¸æ‰å¸§
- [ ] å¢é‡æ›´æ–°æ­£ç¡®ï¼ˆåªæ”¹å˜å½“å‰Kï¼‰

### å®æˆ˜é¡¹ç›® 4.4ï¼š3D åœ°çƒå¯è§†åŒ–
**ä»»åŠ¡**ï¼šåœ¨çƒé¢ä¸Šæ˜¾ç¤ºæ•°æ®ç‚¹ï¼ˆå¦‚åœ°éœ‡ã€èˆªç­ï¼‰
- åŠ è½½åœ°çƒçº¹ç†è´´å›¾
- æ ¹æ®ç»çº¬åº¦è®¡ç®—çƒé¢åæ ‡
- ç”¨å…‰ç…§æ¨¡å‹ï¼ˆPhong/Blinn-Phongï¼‰
- å®ç°é¼ æ ‡æ—‹è½¬åœ°çƒï¼ˆArcballï¼‰

**éªŒæ”¶æ ‡å‡†**
- [ ] åœ°çƒçº¹ç†æ­£ç¡®ã€å…‰ç…§åˆç†
- [ ] æ•°æ®ç‚¹ä½ç½®å‡†ç¡®
- [ ] äº¤äº’æµç•…

### å­¦ä¹ èµ„æº
- [GPU Gemsï¼ˆå…è´¹åœ¨çº¿ï¼‰](https://developer.nvidia.com/gpugems/gpugems/contributors) - å›¾å½¢å­¦ç»å…¸
- [Shadertoy](https://www.shadertoy.com/) - Shader åˆ›æ„çµæ„Ÿ
- [Three.js æºç ](https://github.com/mrdoob/three.js) - å­¦ä¹ å·¥ç¨‹å®è·µ

---

## é˜¶æ®µ 5ï¼šä¸“é¡¹æ·±å…¥ï¼ˆæŒç»­ï¼‰

### æ–¹å‘é€‰æ‹©

#### A. æ•°æ®å¯è§†åŒ–æ–¹å‘
**ç›®æ ‡**ï¼šæˆä¸ºå¯è§†åŒ–ä¸“å®¶
- æ·±å…¥å­¦ä¹  D3.jsã€EChartsã€deck.gl æºç 
- å®ç°è‡ªå·±çš„å›¾è¡¨åº“ï¼ˆæ”¯æŒ Canvas/WebGL åŒå¼•æ“ï¼‰
- ç ”ç©¶å¤§è§„æ¨¡æ•°æ®èšåˆç®—æ³•ï¼ˆbinning/clusteringï¼‰
- å•†ä¸šé¡¹ç›®ï¼šé‡‘èè¡Œæƒ…ã€å·¥ä¸šç›‘æ§å¤§å±ã€GIS å¯è§†åŒ–

**æ¨èèµ„æº**
- [D3.js æºç ](https://github.com/d3/d3)
- [deck.gl æ–‡æ¡£](https://deck.gl/)
- [Observable](https://observablehq.com/) - å¯è§†åŒ–åˆ›ä½œå¹³å°

#### B. æ¸¸æˆ/3D æ–¹å‘
**ç›®æ ‡**ï¼šæˆä¸ºå›¾å½¢/æ¸¸æˆå·¥ç¨‹å¸ˆ
- æ·±å…¥ Three.js/Babylon.jsï¼Œåšå®šåˆ¶åŒ–æ¸²æŸ“
- å­¦ä¹ ç‰©ç†å¼•æ“ï¼ˆCannon.js/Ammo.jsï¼‰
- å®ç°é˜´å½±ã€å…¨å±€å…‰ç…§ã€PBR æè´¨
- å•†ä¸šé¡¹ç›®ï¼š3D äº§å“å±•ç¤ºã€è™šæ‹Ÿå±•å…ã€WebGL æ¸¸æˆ

**æ¨èèµ„æº**
- [Three.js Journey](https://threejs-journey.com/) - ä»˜è´¹ä½†è´¨é‡æé«˜
- [Real-Time Rendering ä¹¦](https://www.realtimerendering.com/)
- [Unity Shader å…¥é—¨](https://www.zhihu.com/column/c_1339307806320799744)

#### C. éŸ³è§†é¢‘æ–¹å‘
**ç›®æ ‡**ï¼šæˆä¸ºå¤šåª’ä½“å·¥ç¨‹å¸ˆ
- WebCodecs APIã€Canvas/WebGL å¸§å¤„ç†
- å®æ—¶æ»¤é•œã€ç¾é¢œã€ç‰¹æ•ˆ
- WebRTC è§†é¢‘æµå¤„ç†
- å•†ä¸šé¡¹ç›®ï¼šåœ¨çº¿ç¼–è¾‘å™¨ã€ç›´æ’­ç¾é¢œã€è§†é¢‘ä¼šè®®

**æ¨èèµ„æº**
- [WebCodecs æ–‡æ¡£](https://developer.mozilla.org/en-US/docs/Web/API/WebCodecs_API)
- [FFmpeg.wasm](https://github.com/ffmpegwasm/ffmpeg.wasm)

#### D. WebGPU å‰æ²¿æ–¹å‘
**ç›®æ ‡**ï¼šæŒæ¡ä¸‹ä¸€ä»£å›¾å½¢ API
- å­¦ä¹  WebGPUï¼ˆæ¯” WebGL æ›´ç°ä»£ã€æ›´å¼ºå¤§ï¼‰
- Compute Shader åš GPGPU è®¡ç®—
- è·¨å¹³å°é«˜æ€§èƒ½åº”ç”¨
- å•†ä¸šé¡¹ç›®ï¼šAI æ¨¡å‹æ¨ç†ã€ç§‘å­¦è®¡ç®—å¯è§†åŒ–

**æ¨èèµ„æº**
- [WebGPU Fundamentals](https://webgpufundamentals.org/)
- [WebGPU Samples](https://austin-eng.com/webgpu-samples/)

---

## å­¦ä¹ å»ºè®®ä¸é¿å‘æŒ‡å—

### å­¦ä¹ ç­–ç•¥
1. **é¡¹ç›®é©±åŠ¨**ï¼šä¸è¦åªçœ‹æ•™ç¨‹ï¼Œæ¯ä¸ªæ¦‚å¿µéƒ½è¦åšä¸ªå°é¡¹ç›®éªŒè¯
2. **æ€§èƒ½ä¼˜å…ˆ**ï¼šæ¯ä¸ªé¡¹ç›®éƒ½ç”¨ DevTools éªŒè¯æ€§èƒ½ï¼Œå…»æˆ profiling ä¹ æƒ¯
3. **è¯»æºç **ï¼šçœ‹ PixiJS/regl/Three.js æºç ï¼Œå­¦ä¹ å·¥ç¨‹å®è·µ
4. **åšç¬”è®°**ï¼šç”¨ Markdown è®°å½•è¸©å‘å’Œè§£å†³æ–¹æ¡ˆ
5. **å¾ªåºæ¸è¿›**ï¼šä¸è¦è·³æ­¥ï¼ŒåŸºç¡€ä¸ç‰¢ä¼šå¡å¾ˆä¹…

### å¸¸è§å‘
- âŒ è·³è¿‡ Canvas 2D ç›´æ¥å­¦ WebGLï¼ˆåŸºç¡€ä¸ç‰¢ï¼‰
- âŒ ä¸åšæ€§èƒ½åˆ†æï¼Œåªå…³æ³¨åŠŸèƒ½å®ç°
- âŒ åªçœ‹æ•™ç¨‹ä¸åŠ¨æ‰‹ï¼Œä»£ç ä¸€å®šè¦è‡ªå·±å†™
- âŒ çº ç»“æ•°å­¦ç»†èŠ‚ï¼ˆçŸ©é˜µæ¨å¯¼ï¼‰ï¼Œå…ˆä¼šç”¨å†æ·±ç©¶
- âŒ é—­é—¨é€ è½¦ï¼Œå¤šçœ‹å¼€æºé¡¹ç›®æºç 

### æ—¶é—´åˆ†é…å»ºè®®
- æ¯å¤©è‡³å°‘ 2 å°æ—¶ç¼–ç ï¼ˆå‘¨æœ« 4+ å°æ—¶ï¼‰
- 70% æ—¶é—´å†™ä»£ç ï¼Œ20% çœ‹æ–‡æ¡£/æºç ï¼Œ10% çœ‹è§†é¢‘
- æ¯å‘¨è‡³å°‘å®Œæˆä¸€ä¸ªå°é¡¹ç›®

### éªŒæ”¶é‡Œç¨‹ç¢‘
- âœ… ç¬¬ 1 ä¸ªæœˆï¼šèƒ½ç”¨ Canvas 2D åšå‡ºæµç•…çš„ç²’å­ç³»ç»Ÿå’Œ K çº¿å›¾
- âœ… ç¬¬ 2 ä¸ªæœˆï¼šèƒ½ç‹¬ç«‹å†™ Shaderï¼Œå®ç° 3D ç‰©ä½“å’Œçº¹ç†
- âœ… ç¬¬ 3 ä¸ªæœˆï¼šèƒ½ç”¨ WebGL åšå®ä¾‹åŒ–ç»˜åˆ¶ï¼Œå¤„ç† 10 ä¸‡çº§æ•°æ®
- âœ… ç¬¬ 4-6 ä¸ªæœˆï¼šå®Œæˆä¸€ä¸ªå•†ä¸šçº§é¡¹ç›®ï¼ˆå¯è§†åŒ–/æ¸¸æˆ/å¤šåª’ä½“ï¼‰

---

## æ¨èå·¥å…·ä¸åº“

### å¼€å‘å·¥å…·
- **ç¼–è¾‘å™¨**ï¼šVS Code + GLSL è¯­æ³•é«˜äº®æ’ä»¶
- **è°ƒè¯•**ï¼šChrome DevTools + [Spector.js](https://spector.babylonjs.com/)ï¼ˆWebGL è°ƒè¯•å™¨ï¼‰
- **æ€§èƒ½**ï¼šChrome Performanceã€Frame Profiler
- **Shader ç¼–è¾‘**ï¼š[Shadertoy](https://www.shadertoy.com/)ã€[GLSL Sandbox](http://glslsandbox.com/)

### å¸¸ç”¨åº“
- **æ•°å­¦åº“**ï¼š[gl-matrix](https://glmatrix.net/)ï¼ˆå¿…å¤‡ï¼‰
- **è½»é‡ WebGL**ï¼š[regl](https://github.com/regl-project/regl)ã€[TWGL](https://twgljs.org/)
- **å…¨åŠŸèƒ½å¼•æ“**ï¼š[Three.js](https://threejs.org/)ã€[Babylon.js](https://www.babylonjs.com/)
- **2D åŠ é€Ÿ**ï¼š[PixiJS](https://pixijs.com/)
- **å¯è§†åŒ–**ï¼š[deck.gl](https://deck.gl/)ã€[Plotly.js](https://plotly.com/javascript/)

---

## æœ€åï¼šä¸ºä»€ä¹ˆå€¼å¾—æŠ•å…¥

### çŸ­æœŸæ”¶ç›Šï¼ˆ3-6 ä¸ªæœˆï¼‰
- âœ… æŠ€æœ¯é¢è¯•ç¢¾å‹åŒçº§å€™é€‰äºº
- âœ… èƒ½æ¥é«˜æº¢ä»·çš„å¯è§†åŒ–/å›¾å½¢å¤–åŒ…
- âœ… å…¬å¸å†…éƒ¨æˆä¸º"å›¾å½¢/æ€§èƒ½ä¼˜åŒ–"ä¸“å®¶

### é•¿æœŸä»·å€¼ï¼ˆ1-3 å¹´ï¼‰
- âœ… ä¸å¯æ›¿ä»£æ€§ï¼šAI è¿˜å†™ä¸å¥½ Shader å’Œæ€§èƒ½ä¼˜åŒ–
- âœ… èŒä¸šå¤©èŠ±æ¿é«˜ï¼šå¯ä»¥ä¸€ç›´å†™ä»£ç ä¸”è¶Šè€è¶Šå€¼é’±
- âœ… è·¨è¡Œä¸šé€‚ç”¨ï¼šæ¸¸æˆã€é‡‘èã€å·¥ä¸šã€åŒ»ç–—éƒ½éœ€è¦å›¾å½¢äººæ‰
- âœ… å‰¯ä¸šæ½œåŠ›ï¼šå¯è§†åŒ–å’¨è¯¢ã€Shader ç‰¹æ•ˆã€3D å±•ç¤ºéƒ½æ˜¯é«˜ä»·æœåŠ¡

### ä¸ªäººæˆé•¿
- çœŸæ­£ç†è§£"è®¡ç®—æœºæ€ä¹ˆç”»å›¾"
- å»ºç«‹ç³»ç»Ÿæ€§èƒ½åˆ†æå’Œä¼˜åŒ–çš„æ–¹æ³•è®º
- è·¨è¶Š"ä¸šåŠ¡å¼€å‘"å’Œ"åº•å±‚å·¥ç¨‹"çš„é¸¿æ²Ÿ

---

## è¡ŒåŠ¨æ¸…å•

### æœ¬å‘¨è¡ŒåŠ¨ï¼ˆWeek 1ï¼‰
- [ ] å®‰è£… Chrome DevToolsï¼Œå­¦ä¼šå½•åˆ¶ Performance
- [ ] å®Œæˆ"æ€§èƒ½åˆ†æå°å·¥å…·"é¡¹ç›®
- [ ] å®ç° FPS ç›‘æ§å™¨
- [ ] é˜…è¯»ã€Šæµè§ˆå™¨å·¥ä½œåŸç†ã€‹å‰ 3 ç« 

### æœ¬æœˆç›®æ ‡ï¼ˆMonth 1ï¼‰
- [ ] å®Œæˆé˜¶æ®µ 1 å’Œé˜¶æ®µ 2 æ‰€æœ‰é¡¹ç›®
- [ ] åšå‡º 60fps çš„ç²’å­ç³»ç»Ÿ
- [ ] åšå‡ºåˆ†å±‚ç¼“å­˜çš„ K çº¿å›¾
- [ ] å¼€å§‹å†™å­¦ä¹ ç¬”è®°ï¼ˆMarkdown/åšå®¢ï¼‰

### 3 ä¸ªæœˆç›®æ ‡
- [ ] å®Œæˆé˜¶æ®µ 3 æ‰€æœ‰ WebGL åŸºç¡€é¡¹ç›®
- [ ] èƒ½ç‹¬ç«‹ç¼–å†™ Shader å’Œ MVP å˜æ¢
- [ ] å®ç° 10 ä¸‡ç²’å­çš„ GPU ç»˜åˆ¶

### 6 ä¸ªæœˆç›®æ ‡
- [ ] å®Œæˆä¸€ä¸ªå•†ä¸šçº§é¡¹ç›®ï¼ˆé€‰ä¸€ä¸ªæ–¹å‘ï¼‰
- [ ] åœ¨ GitHub ä¸Šå¼€æºä¸€ä¸ªå›¾å½¢åº“/å·¥å…·
- [ ] æŠ€æœ¯åšå®¢è‡³å°‘ 10 ç¯‡
- [ ] å¼€å§‹æ¥å¤–åŒ…æˆ–å‡†å¤‡è·³æ§½

---

## èµ„æºæ±‡æ€»

### å¿…è¯»æ•™ç¨‹
1. [WebGL Fundamentals](https://webglfundamentals.org/) â­â­â­â­â­
2. [The Book of Shaders](https://thebookofshaders.com/) â­â­â­â­â­
3. [æµè§ˆå™¨å·¥ä½œåŸç†](https://web.dev/howbrowserswork/) â­â­â­â­
4. [High Performance Canvas](https://www.html5rocks.com/en/tutorials/canvas/performance/) â­â­â­â­

### æ¨èä¹¦ç±
- ã€ŠWebGL ç¼–ç¨‹æŒ‡å—ã€‹- å…¥é—¨å¿…è¯»
- ã€ŠReal-Time Renderingã€‹- å›¾å½¢å­¦åœ£ç»ï¼ˆåç†è®ºï¼‰
- ã€Šæ¸¸æˆå¼•æ“æ¶æ„ã€‹- å·¥ç¨‹å®è·µ

### ç¤¾åŒºä¸å‚è€ƒ
- [Stack Overflow - WebGL æ ‡ç­¾](https://stackoverflow.com/questions/tagged/webgl)
- [Shadertoy](https://www.shadertoy.com/) - Shader åˆ›æ„
- [Three.js Discourse](https://discourse.threejs.org/)
- [çŸ¥ä¹ - WebGL è¯é¢˜](https://www.zhihu.com/topic/19550826)

---

## ç»“è¯­

è¿™ä»½è·¯çº¿å›¾çš„æ ¸å¿ƒæ˜¯"é¡¹ç›®é©±åŠ¨ + æ€§èƒ½ä¼˜å…ˆ + å¾ªåºæ¸è¿›"ã€‚ä¸è¦è¢«æœ¯è¯­å“åˆ°ï¼Œæ¯ä¸ªæ¦‚å¿µéƒ½é…æœ‰å¯è¿è¡Œçš„ä»£ç å’ŒéªŒæ”¶æ ‡å‡†ã€‚

**è®°ä½**ï¼š
- ä¸šåŠ¡ä»£ç  3 ä¸ªæœˆèƒ½ä¸Šæ‰‹ï¼Œæ¸²æŸ“/å›¾å½¢éœ€è¦ 6 ä¸ªæœˆæ‰“åŸºç¡€
- ä½†å‰è€…å¤©èŠ±æ¿ä½ä¸”å®¹æ˜“è¢«æ›¿ä»£ï¼Œåè€…è¶Šåšè¶Šå€¼é’±
- ä½ æŠ•å…¥çš„æ¯ä¸€å°æ—¶ï¼Œéƒ½åœ¨å»ºç«‹æŠ¤åŸæ²³

**ç°åœ¨å°±å¼€å§‹**ï¼š
1. æ‰“å¼€ Chrome DevTools
2. åˆ›å»ºç¬¬ä¸€ä¸ª `<canvas>` å…ƒç´ 
3. å†™ä¸‹ç¬¬ä¸€è¡Œ `requestAnimationFrame`

ä»ä»Šå¤©èµ·ï¼Œä½ å°±æ˜¯æ‡‚"åº•å±‚æ¸²æŸ“"çš„å‰ç«¯å·¥ç¨‹å¸ˆäº†ã€‚åŠ æ²¹ï¼ğŸš€

---

**ç‰ˆæœ¬**ï¼šv1.0  
**æ›´æ–°æ—¥æœŸ**ï¼š2025-10-28  
**ä½œè€…å»ºè®®**ï¼šæ¯å®Œæˆä¸€ä¸ªé˜¶æ®µï¼Œå›æ¥æ›´æ–°è¿™ä»½æ–‡æ¡£ï¼Œè®°å½•ä½ çš„è¿›åº¦å’Œå¿ƒå¾—
