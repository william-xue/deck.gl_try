# webgl_mvp 教程索引

> 使用建议：先打开 `index.html` 体验核心 MVP 示范，再按需进入 `demos/` 子目录学习具体主题。所有示例都可以直接使用浏览器打开。

## 目录结构快览

| 文件 | 主题 | 适合关注的要点 |
| --- | --- | --- |
| `index.html` | MVP 综述：立方体 + 滑块交互 | 建立 Model/View/Projection 三矩阵的整体认知，理解滑块如何驱动矩阵参数 |
| `demos/custom_shape.html` | 自定义几何体 | 通过替换顶点数据加载四面体，熟悉缓冲区写入流程 |
| `demos/matrix_extensions.html` | 缩放 + 任意轴旋转 | 引入 `mat4Scale` 与 `mat4RotateAxis`，体验矩阵组合顺序的重要性 |
| `demos/model_translation.html` | 模型平移 | 单独练习平移矩阵，理解位置与姿态的解耦 |
| `demos/orthographic_projection.html` | 正交投影 | 对比透视，被动体验“没有近大远小”的效果 |
| `demos/projection_toggle.html` | 投影模式切换 | 实时在透视/正交之间切换，构建选择投影的思考框架 |

## 入门路线（建议顺序）

1. **MVP 总览 (`index.html`)**
   - 滑块控制模型旋转角度、摄像机距离、透视视角，加深对三大矩阵职责的直觉。
   - 脚本中配有大量中文注释，逐段解释 WebGL 管线、缓冲区绑定、uniform 更新流程。

2. **自定义几何 (`custom_shape.html`)**
   - 将内置立方体替换为四面体顶点，理解“只要 positions/colors 正确，MVP 管线即可复用”。
   - 通过调节旋转速度，观察不同面片的颜色插值。

3. **矩阵扩展 (`matrix_extensions.html`)**
   - UI 控件将缩放向量与任意轴旋转参数送入 GPU，强调“矩阵乘法的先后顺序决定最终姿态”。
   - 适合结合数学手册验证罗德里格斯公式，实现项目级别的姿态控制。

4. **单独平移 (`model_translation.html`)**
   - 深入理解“模型矩阵 = 平移 × 旋转”，在调度场景或图层对齐时非常实用。

5. **正交视角 (`orthographic_projection.html`)**
   - 了解工程制图、仪表盘、配电拓扑等场景为何偏爱正交投影。

6. **模式切换 (`projection_toggle.html`)**
   - 按钮切换投影模式，借助徽章/滑块提示当前配置，帮助总结何时选透视、何时选正交。

## 实践练习与场景联想

| 练习方向 | 操作提示 | 对应真实场景 |
| --- | --- | --- |
| 电力拓扑首屏 SSR + 客户端水合 | 在 `index.html` 中将摄像机距离设置为 6~10，观察 MVP 如何保持全局视角 | 在实时监控平台中展示站内设备位姿，结合前序 hydrate 教程延伸到 React 应用 |
| 可再生能源组件定制建模 | 在 `custom_shape.html` 中替换为风机/光伏面板顶点，验证色彩插值 | 数据平台展示不同设备外形、检查模型贴图 | 
| 线路状态放大与缩放 | 使用 `matrix_extensions.html` 控制不同轴向缩放，模拟电缆拉伸、应力变化的可视化 | 分析线路负载或设备温度的 anisotropic scaling |
| 调度指令位移 | `model_translation.html` 中调节平移滑块，加上自旋更易观察位置变化 | 模拟调度命令将设备移动到不同位置、验证坐标系转换 |
| 正交投影下的负荷热力图 | `orthographic_projection.html` 中加大视体宽度，叠加 2D 覆盖层 | 建立与 GIS/二维热力可视化的联动认知 |
| 透视/正交动态切换 | `projection_toggle.html` 中联动按钮与滑块，记录用户体验差异 | 在实时大屏中提供“精准测量视图 VS 沉浸视图”的互切入口 |

## 进阶扩展（扩散思路）

1. **整合 GPU 调试工具**：在 Chrome DevTools 中开启 WebGL Inspector 或使用 Spector.js，观察 Uniform/Buffer 的变化轨迹，辅助理解矩阵上传顺序。
2. **加入法线与光照**：在现有顶点数据基础上扩展法向量与 Blinn-Phong 光照，实现更真实的光影效果，锻炼矩阵与光照联合调试能力。
3. **引入相机轨道控制**：用鼠标事件替换固定的 `mat4LookAt`，实现类似 deck.gl 或三维 GIS 的交互式相机，方便在电力拓扑场景中漫游。
4. **数据驱动的动态变换**：把实时仿真输出（如潮流计算结果、设备温度）映射到缩放或颜色，验证 MVP 管线与业务数据结合的思路。
5. **TypeScript/模块化改造**：把矩阵函数抽出为独立模块（例如 `math/mat4.ts`），结合 Vite/ESM 打包，提高项目可维护性。
6. **与 RSC/Hydrate 教程串联**：在 React 应用中封装 `<WebGLCanvas>` 组件，服务器渲染初始姿态，客户端通过 hydrate + MVP 滑块恢复交互。

## 快速自检清单

- [ ] 能解释模型矩阵、视图矩阵、投影矩阵各自的数学意义。
- [ ] 知道如何把顶点数组/颜色数组写入 WebGL 缓冲，并在着色器中读取。
- [ ] 明白为什么正交投影不会出现“近大远小”，以及在什么场景需要它。
- [ ] 遇到着色器编译错误时，能通过脚本中封装的错误输出定位问题。
- [ ] 能够根据业务需求，自主决定矩阵乘法的顺序（例如先缩放还是先旋转）。

如需更深入的实践（例如添加电流流向动画、叠加 deck.gl 图层、或与 React/Three.js 混合使用），欢迎继续提出具体需求，我会协助你规划实现路径。
